/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PertinentQuestions
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/AppSettings.ts
var AppSettings = class {
};
AppSettings.EMAIL_NL = `

`;
// Email new line
AppSettings.EMAIL_SOL = `  `;
//Email start of line
AppSettings.MAC_FOLDER_SEPARATOR = `/`;
AppSettings.ALL_CATEGORIES = "All Categories";
AppSettings.CREATE_PERTINENT_QUESTIONS = "Create Pertinent Questions";
AppSettings.SUBJECT_GOES_HERE = "SUBJECT GOES HERE";
AppSettings.FAO = "FAO";

// main.ts
var DEFAULT_SETTINGS = {
  questionsFolder: "Questions",
  outputFolder: "Pertinent Questions",
  contactsFile: "contacts.csv"
};
var PertinentQuestions = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "create-pertinent-questions",
      name: AppSettings.CREATE_PERTINENT_QUESTIONS,
      callback: async () => {
        const categories = [];
        this.findAllCategories().forEach((cat) => {
          categories.unshift(cat);
        });
        const contacts = [];
        let allContacts = await this.getAllContacts(this.settings.contactsFile);
        if (allContacts != null) {
          allContacts.forEach((contact) => {
            contacts.unshift(contact);
          });
        }
        const suggestModal = new PertinentQuestionsSuggestModal(this.app, categories, contacts, this.settings.outputFolder, this.settings.questionsFolder).open();
      }
    });
    this.addSettingTab(new PertinentSettingTab(this.app, this));
  }
  async getAllContacts(theContactFile) {
    const files = this.app.vault.getFiles();
    let found = false;
    const contacts = [];
    for (let i = 0; i < files.length; i++) {
      const fileName = files[i].name;
      if (fileName.startsWith(theContactFile)) {
        found = true;
        const fileContents = await this.app.vault.cachedRead(files[i]);
        const fileLines = fileContents.split("\n");
        for (let j = 0; j < fileLines.length; j++) {
          const contactFields = fileLines[j].split(",");
          contacts.unshift(contactFields);
        }
        i = files.length;
      }
    }
    if (!found) {
      console.log(`Didn't find a contacts file`);
      new import_obsidian.Notice(`Contacts file not found - expected ${this.settings.contactsFile}`);
    } else {
      return contacts;
    }
    return null;
  }
  findAllCategories() {
    const categories = [];
    function extractSecondLevelFolder(str) {
      const regex = /\/([^\/]*)\//;
      const match = str.match(regex);
      return match ? match[1] : null;
    }
    const folderOrFile = this.app.vault.getAbstractFileByPath(this.settings.questionsFolder);
    let numFolders = 0;
    if (folderOrFile instanceof import_obsidian.TFolder) {
      for (let child of folderOrFile.children) {
        if (child instanceof import_obsidian.TFile) {
        } else {
          const categoryFolder = this.app.vault.getAbstractFileByPath(child.path);
          console.log(`catFolder = ${categoryFolder} and childPath = ${child.path}************`);
          if (categoryFolder instanceof import_obsidian.TFolder) {
            for (let innerChild of categoryFolder.children) {
              if (innerChild instanceof import_obsidian.TFile) {
                const substring = extractSecondLevelFolder(innerChild.path);
                console.log(`substring============${substring} from ${innerChild.path}`);
                if (substring != null) {
                  if (!categories.contains(substring)) {
                    categories.unshift(substring);
                  }
                } else {
                  console.log(`Couldn't extract folder substring from ${innerChild.path}`);
                }
              }
            }
          }
        }
      }
      console.log(`numFolders=${numFolders}`);
    } else {
      console.log(`NOT AN INSTANCE OF TFolder instead it is ${folderOrFile}`);
    }
    categories.unshift(AppSettings.ALL_CATEGORIES);
    return categories;
  }
  onunload() {
    console.log("Unloading PertinentQuestions plugin...");
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var PertinentQuestionsSuggestModal = class extends import_obsidian.SuggestModal {
  constructor(app, categories, contacts, outputFolder, questionsFolder) {
    super(app);
    this.vault = app.vault;
    this.categories = categories;
    this.contacts = contacts;
    this.outputFolder = outputFolder;
    this.questionsFolder = questionsFolder;
  }
  // Returns all available suggestions.
  getSuggestions(query) {
    this.categories.sort();
    if (this.categories[0] != AppSettings.ALL_CATEGORIES) {
      const index = this.categories.indexOf(AppSettings.ALL_CATEGORIES);
      this.categories.splice(index, 1);
      this.categories.unshift(AppSettings.ALL_CATEGORIES);
    }
    return this.categories.filter(
      (cat) => cat.toLowerCase().includes(query.toLowerCase())
    );
  }
  // Renders each suggestion item.
  renderSuggestion(cat, el) {
    el.createEl("div", { text: cat });
  }
  // Perform action on the selected suggestion.
  async onChooseSuggestion(cat, evt) {
    this.createFolder(this.outputFolder);
    if (cat != AppSettings.ALL_CATEGORIES) {
      this.categories = [cat];
    }
    for (let j = 0; j < this.categories.length; j++) {
      console.log(`cat ${j} = ${this.categories[j]}`);
      let theQuestions = await this.getCategoryQuestions(this.categories[j]);
      if (theQuestions != null) {
        const theFolder = this.outputFolder.concat(AppSettings.MAC_FOLDER_SEPARATOR).concat(this.categories[j]);
        this.createFolder(theFolder);
        for (let i = 0; i < this.contacts.length; i++) {
          console.log(`contact ${i} = ${this.contacts[i]}`);
          for (let k = 0; k < theQuestions.length; k++) {
            let theQuestion = theQuestions[k];
            const [title, firstName, lastName, emailAddress] = this.contacts[i];
            const theSubject = AppSettings.SUBJECT_GOES_HERE;
            const theFileMetaData = `---
sent: false
category: ${this.categories[j]}
---

`;
            const theQuestionFileName = theQuestion.split("\n", 2);
            const index = theQuestion.indexOf("\n");
            if (index != void 0) {
              theQuestion = theQuestion.substring(index, theQuestion.length - 1);
              const theBody = `${AppSettings.FAO} ${title} ${firstName} ${lastName}${theQuestion}`;
              const theFileName = theFolder.concat("/").concat(firstName + lastName + "-" + theQuestionFileName[0] + ".md");
              const fileExists = await this.fileExists(theFileName);
              if (!fileExists) {
                console.log(`CREATING FILE *** ${theFileName}`);
                let theFile = await this.createFile(theFileName, theFileMetaData);
                if (theFile instanceof import_obsidian.TFile) {
                  const theContent = "```email\n".concat(`to: ${emailAddress}
subject: ${theSubject}

body: "${theBody}"
`).concat("```").concat("\n#ToSend");
                  try {
                    await this.app.vault.append(theFile, theContent);
                  } catch (e) {
                    new import_obsidian.Notice("Could not append");
                    console.log(`Could not append to file: ${theFileName} due to ${e}`);
                  }
                } else {
                  new import_obsidian.Notice("Could not create file");
                  console.log(`Error - could not create file for ${theFileName}`);
                }
              } else {
              }
            }
          }
        }
      } else {
        console.log(`Couldn't read any file at ${this.questionsFolder} `);
      }
    }
  }
  async fileExists(filePath) {
    return await this.app.vault.adapter.exists(filePath);
  }
  async createFile(theFilePath, content) {
    try {
      const folderOrFile = this.app.vault.getAbstractFileByPath(theFilePath);
      if (folderOrFile instanceof import_obsidian.TFile) {
        console.log(`Already created file!!!`);
        return folderOrFile;
      } else if (folderOrFile instanceof import_obsidian.TFolder) {
        console.log(`Expected to create file but folder specified: ${theFilePath}`);
      } else {
        console.log(`Creating File ${theFilePath}`);
        const createdFile = await this.app.vault.create(theFilePath, content);
        return createdFile;
      }
    } catch (e) {
      console.log(e);
    }
    return null;
  }
  async createFolder(theFolder) {
    try {
      await this.app.vault.createFolder(theFolder);
      console.log("Created");
    } catch (e) {
      console.log(e);
    }
  }
  async getCategoryQuestions(category) {
    try {
      const folderOrFile = this.app.vault.getAbstractFileByPath(this.questionsFolder.concat(AppSettings.MAC_FOLDER_SEPARATOR.concat(category)));
      if (folderOrFile instanceof import_obsidian.TFolder) {
        const theQuestions = [];
        for (let child of folderOrFile.children) {
          if (child instanceof import_obsidian.TFile) {
            let theQuestionLines = await this.app.vault.cachedRead(child);
            const index = child.path.lastIndexOf(AppSettings.MAC_FOLDER_SEPARATOR);
            if (index != void 0) {
              let theQuestion = child.path + "\n";
              theQuestion = theQuestion.substring(index + 1, theQuestion.length - 4);
              const questionLines = theQuestionLines.split("\n");
              const lineStart = AppSettings.EMAIL_NL.concat(AppSettings.EMAIL_SOL);
              for (let i = 0; i < questionLines.length; i++) {
                theQuestion += lineStart.concat(questionLines[i]);
              }
              theQuestions.unshift(theQuestion);
            }
          }
        }
        return theQuestions;
      } else {
        console.log(`Expected folder in getCategoryQuestions param but sent ${this.questionsFolder.concat(category)}`);
        return null;
      }
    } catch (e) {
      console.log(e);
    }
    return null;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var PertinentSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "General Settings" });
    new import_obsidian.Setting(containerEl).setName("Questions Folder").setDesc("Enter the Folder Location").addText((text) => text.setPlaceholder("Enter Questions Folder").setValue(this.plugin.settings.questionsFolder).onChange(async (value) => {
      console.log("Questions Location: " + value);
      this.plugin.settings.questionsFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Questions Output Folder").setDesc("Enter the Pertinent Questions Output Folder Location").addText((text) => text.setPlaceholder("Enter Pertinent Questions Output Folder").setValue(this.plugin.settings.outputFolder).onChange(async (value) => {
      console.log("Output Folder Location: " + value);
      this.plugin.settings.outputFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Contacts Import File").setDesc("Enter the Contacts Import File Location").addText((text) => text.setPlaceholder("Enter Contacts File Location").setValue(this.plugin.settings.contactsFile).onChange(async (value) => {
      console.log("Contacts File Location: " + value);
      this.plugin.settings.contactsFile = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvQXBwU2V0dGluZ3MudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1vZGFsLCBTdWdnZXN0TW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVEZvbGRlciwgV29ya3NwYWNlTGVhZiwgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBcHBTZXR0aW5ncyB9IGZyb20gXCJzcmMvQXBwU2V0dGluZ3NcIjtcblxuLy8gaW1wb3J0IHsgQ1NWVmlldywgVklFV19UWVBFX0NTViB9IGZyb20gXCIuL3ZpZXdcIjtcblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5cbmludGVyZmFjZSBQZXJ0aW5lbnRRdWVzdGlvbnNTZXR0aW5ncyB7XG5cdHF1ZXN0aW9uc0ZvbGRlcjogc3RyaW5nO1xuXHRvdXRwdXRGb2xkZXI6IHN0cmluZztcblx0Y29udGFjdHNGaWxlOiBzdHJpbmc7XG5cblxufVxuXG5cblxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQZXJ0aW5lbnRRdWVzdGlvbnNTZXR0aW5ncyA9IHtcblx0cXVlc3Rpb25zRm9sZGVyOiAnUXVlc3Rpb25zJyxcblx0b3V0cHV0Rm9sZGVyOiAnUGVydGluZW50IFF1ZXN0aW9ucycsXG5cdGNvbnRhY3RzRmlsZTogJ2NvbnRhY3RzLmNzdidcblxufVxuXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVydGluZW50UXVlc3Rpb25zIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IFBlcnRpbmVudFF1ZXN0aW9uc1NldHRpbmdzO1xuXG5cblxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIEFkZCBjb21tYW5kIHRvIGxhdW5jaCBBc2sgUGVydGluZW50IFF1ZXN0aW9uc1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NyZWF0ZS1wZXJ0aW5lbnQtcXVlc3Rpb25zJyxcblx0XHRcdG5hbWU6IEFwcFNldHRpbmdzLkNSRUFURV9QRVJUSU5FTlRfUVVFU1RJT05TLCBcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNhdGVnb3JpZXM6IHN0cmluZ1tdID0gW107XG5cdFx0XHRcdHRoaXMuZmluZEFsbENhdGVnb3JpZXMoKS5mb3JFYWNoKGNhdCA9PiB7XG5cdFx0XHRcdFx0Y2F0ZWdvcmllcy51bnNoaWZ0KGNhdCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnN0IGNvbnRhY3RzOiBzdHJpbmdbXVtdID0gW107XG5cdFx0XHRcdGxldCBhbGxDb250YWN0cyA9IGF3YWl0IHRoaXMuZ2V0QWxsQ29udGFjdHModGhpcy5zZXR0aW5ncy5jb250YWN0c0ZpbGUpO1xuXHRcdFx0XHRpZiAoYWxsQ29udGFjdHMgIT0gbnVsbCkge1xuXHRcdFx0XHRcdGFsbENvbnRhY3RzLmZvckVhY2goY29udGFjdCA9PiB7XG5cdFx0XHRcdFx0XHRjb250YWN0cy51bnNoaWZ0KGNvbnRhY3QpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIE5lZWQgdG8gaXRlcmF0ZSB0aHJvdWdoIGVhY2ggY29udGFjdCBBTkQgXG5cdFx0XHRcdGNvbnN0IHN1Z2dlc3RNb2RhbCA9IG5ldyBQZXJ0aW5lbnRRdWVzdGlvbnNTdWdnZXN0TW9kYWwodGhpcy5hcHAsIGNhdGVnb3JpZXMsIGNvbnRhY3RzLCB0aGlzLnNldHRpbmdzLm91dHB1dEZvbGRlciwgdGhpcy5zZXR0aW5ncy5xdWVzdGlvbnNGb2xkZXIpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGVydGluZW50U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblxuXHRhc3luYyBnZXRBbGxDb250YWN0cyh0aGVDb250YWN0RmlsZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXVtdIHwgbnVsbD4ge1xuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTsgLy8gQ2FuIGJlIENTViBzbyBuZWVkIHRvIGNyYXdsIGFsbCBmaWxlc1xuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdGNvbnN0IGNvbnRhY3RzOiBzdHJpbmdbXVtdID0gW107XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IGZpbGVzW2ldLm5hbWU7XG5cblx0XHRcdGlmIChmaWxlTmFtZS5zdGFydHNXaXRoKHRoZUNvbnRhY3RGaWxlKSkge1xuXHRcdFx0XHQvLyBpZiAoZmlsZU5hbWUgPT0gdGhpcy5zZXR0aW5ncy5jb250YWN0c0ZpbGUpIHsgLy8gRVFVQUxJVFkgPT0gb3IgPT09IGRvZXMgTk9UIHdvcmtcblx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXG5cdFx0XHRcdGNvbnN0IGZpbGVDb250ZW50czogc3RyaW5nID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlc1tpXSk7XG5cdFx0XHRcdGNvbnN0IGZpbGVMaW5lcyA9IGZpbGVDb250ZW50cy5zcGxpdChcIlxcblwiKTtcblxuXHRcdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IGZpbGVMaW5lcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRhY3RGaWVsZHM6IHN0cmluZ1tdID0gZmlsZUxpbmVzW2pdLnNwbGl0KFwiLFwiKTtcblx0XHRcdFx0XHRjb250YWN0cy51bnNoaWZ0KGNvbnRhY3RGaWVsZHMpO1xuXG5cdFx0XHRcdH1cblx0XHRcdFx0aSA9IGZpbGVzLmxlbmd0aDsgLy9icmVhayBvdXQgYXMgZm91bmRcblx0XHRcdH1cblxuXHRcdH1cblx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhgRGlkbid0IGZpbmQgYSBjb250YWN0cyBmaWxlYCk7XG5cdFx0XHRuZXcgTm90aWNlKGBDb250YWN0cyBmaWxlIG5vdCBmb3VuZCAtIGV4cGVjdGVkICR7dGhpcy5zZXR0aW5ncy5jb250YWN0c0ZpbGV9YCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBjb250YWN0cztcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cblx0fVxuXG5cdGZpbmRBbGxDYXRlZ29yaWVzKCk6IHN0cmluZ1tdIHtcblx0XHQvLyAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cdFx0Y29uc3QgY2F0ZWdvcmllczogc3RyaW5nW10gPSBbXTtcblxuXHRcdGZ1bmN0aW9uIGV4dHJhY3RTZWNvbmRMZXZlbEZvbGRlcihzdHI6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuXHRcdFx0Y29uc3QgcmVnZXggPSAvXFwvKFteXFwvXSopXFwvLztcblx0XHRcdGNvbnN0IG1hdGNoID0gc3RyLm1hdGNoKHJlZ2V4KTtcblxuXHRcdFx0cmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZvbGRlck9yRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnNldHRpbmdzLnF1ZXN0aW9uc0ZvbGRlcik7XG5cdFx0bGV0IG51bUZvbGRlcnMgPSAwO1xuXHRcdGlmIChmb2xkZXJPckZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRmb3IgKGxldCBjaGlsZCBvZiBmb2xkZXJPckZpbGUuY2hpbGRyZW4pIHtcblx0XHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0XHQvLyBUb3AgbGV2ZWwgUXVlc3Rpb25zIGNhdGVnb3J5IGZpbGVcblx0XHRcdFx0fSBlbHNlIHsgLy8gQ2F0ZWdvcnkgRm9sZGVyXG5cdFx0XHRcdFx0Y29uc3QgY2F0ZWdvcnlGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2hpbGQucGF0aClcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgY2F0Rm9sZGVyID0gJHtjYXRlZ29yeUZvbGRlcn0gYW5kIGNoaWxkUGF0aCA9ICR7Y2hpbGQucGF0aH0qKioqKioqKioqKipgKTtcblx0XHRcdFx0XHRpZiAoY2F0ZWdvcnlGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpbm5lckNoaWxkIG9mIGNhdGVnb3J5Rm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChpbm5lckNoaWxkIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzdWJzdHJpbmcgPSBleHRyYWN0U2Vjb25kTGV2ZWxGb2xkZXIoaW5uZXJDaGlsZC5wYXRoKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgc3Vic3RyaW5nPT09PT09PT09PT09JHtzdWJzdHJpbmd9IGZyb20gJHtpbm5lckNoaWxkLnBhdGh9YCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHN1YnN0cmluZyAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWNhdGVnb3JpZXMuY29udGFpbnMoc3Vic3RyaW5nKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXRlZ29yaWVzLnVuc2hpZnQoc3Vic3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgQ291bGRuJ3QgZXh0cmFjdCBmb2xkZXIgc3Vic3RyaW5nIGZyb20gJHtpbm5lckNoaWxkLnBhdGh9YCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKGBudW1Gb2xkZXJzPSR7bnVtRm9sZGVyc31gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coYE5PVCBBTiBJTlNUQU5DRSBPRiBURm9sZGVyIGluc3RlYWQgaXQgaXMgJHtmb2xkZXJPckZpbGV9YCk7XG5cdFx0fVxuXG5cblxuXG5cdFx0Ly8gTWFya2Rvd25maWxlcyBwYXJzZVxuXHRcdC8vIGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdC8vIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcblxuXHRcdC8vIFx0Y29uc3QgdGhlUGF0aCA9IGZpbGVzW2ldLnBhdGg7XG5cdFx0Ly8gXHRpZiAodGhlUGF0aC5zdGFydHNXaXRoKHRoaXMuc2V0dGluZ3MucXVlc3Rpb25zRm9sZGVyKSkge1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhgdGhlUGF0aCA9PT09PSAkeyB0aGVQYXRoIH1gKTtcblx0XHQvLyBcdFx0Y29uc3Qgc3Vic3RyaW5nID0gZXh0cmFjdFNlY29uZExldmVsRm9sZGVyKHRoZVBhdGgpO1xuXHRcdC8vIFx0XHRpZiAoc3Vic3RyaW5nICE9IG51bGwpIHtcblx0XHQvLyBcdFx0XHRjYXRlZ29yaWVzLnVuc2hpZnQoc3Vic3RyaW5nKTtcblx0XHQvLyBcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0Ly8gXHRcdH1cblx0XHQvLyBcdH0gZWxzZSB7XG5cdFx0Ly8gXHRcdC8vIGNvbnNvbGUubG9nKGBEaWQgbm90IG1hdGNoIC0gZmlsZXBhdGg9JHsgZmlsZXNbaV0ucGF0aCB9YCk7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gfVxuXHRcdC8vIGlmICghZm91bmQpIHtcblx0XHQvLyBcdGNvbnNvbGUubG9nKGBRdWVzdGlvbnMgZm9sZGVyIG5vdCBmb3VuZDogJHsgdGhpcy5zZXR0aW5ncy5xdWVzdGlvbnNGb2xkZXIgfWApO1xuXHRcdC8vIH1cblx0XHQvLyBjb25zb2xlLmxvZyhgUmV0dXJuaW5nIGNhdHMgPSAkeyBjYXRlZ29yaWVzIH1gKTtcblx0XHRjYXRlZ29yaWVzLnVuc2hpZnQoQXBwU2V0dGluZ3MuQUxMX0NBVEVHT1JJRVMpO1xuXHRcdHJldHVybiBjYXRlZ29yaWVzO1xuXHR9XG5cblxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiVW5sb2FkaW5nIFBlcnRpbmVudFF1ZXN0aW9ucyBwbHVnaW4uLi5cIik7XG5cdH1cblxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cblxuY2xhc3MgUGVydGluZW50UXVlc3Rpb25zU3VnZ2VzdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xuXHRjYXRlZ29yaWVzOiBzdHJpbmdbXTtcblx0Y29udGFjdHM6IHN0cmluZ1tdW107XG5cdG91dHB1dEZvbGRlcjogc3RyaW5nO1xuXHRxdWVzdGlvbnNGb2xkZXI6IHN0cmluZztcblx0dmF1bHQ6IFZhdWx0O1xuXG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGNhdGVnb3JpZXM6IHN0cmluZ1tdLCBjb250YWN0czogc3RyaW5nW11bXSwgb3V0cHV0Rm9sZGVyOiBzdHJpbmcsIHF1ZXN0aW9uc0ZvbGRlcjogc3RyaW5nKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnZhdWx0ID0gYXBwLnZhdWx0O1xuXHRcdHRoaXMuY2F0ZWdvcmllcyA9IGNhdGVnb3JpZXM7XG5cdFx0dGhpcy5jb250YWN0cyA9IGNvbnRhY3RzO1xuXHRcdHRoaXMub3V0cHV0Rm9sZGVyID0gb3V0cHV0Rm9sZGVyO1xuXHRcdHRoaXMucXVlc3Rpb25zRm9sZGVyID0gcXVlc3Rpb25zRm9sZGVyO1xuXHR9XG5cdC8vIFJldHVybnMgYWxsIGF2YWlsYWJsZSBzdWdnZXN0aW9ucy5cblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IHN0cmluZ1tdIHtcblx0XHQvLyBmdW5jdGlvbiBjb21wYXJlRnVuYyAoYSxiKXtcblx0XHQvLyBcdGlmIFxuXHRcdC8vIH1cblx0XHR0aGlzLmNhdGVnb3JpZXMuc29ydCgpOyAvLyBzb3J0IGFuZCBlbnN1cmUgQUxMX0NBVEVHT1JJRVMgaXMgZmlyc3Qgc2VsZWN0aW9uXG5cdFx0aWYgKHRoaXMuY2F0ZWdvcmllc1swXSE9QXBwU2V0dGluZ3MuQUxMX0NBVEVHT1JJRVMpe1xuXHRcdFx0Y29uc3QgaW5kZXggPSB0aGlzLmNhdGVnb3JpZXMuaW5kZXhPZihBcHBTZXR0aW5ncy5BTExfQ0FURUdPUklFUyk7XG5cdFx0XHR0aGlzLmNhdGVnb3JpZXMuc3BsaWNlKGluZGV4LDEpO1xuXHRcdFx0dGhpcy5jYXRlZ29yaWVzLnVuc2hpZnQoQXBwU2V0dGluZ3MuQUxMX0NBVEVHT1JJRVMpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5jYXRlZ29yaWVzLmZpbHRlcigoY2F0KSA9PlxuXHRcdFx0Y2F0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcblx0XHQpO1xuXHR9XG5cblx0Ly8gUmVuZGVycyBlYWNoIHN1Z2dlc3Rpb24gaXRlbS5cblx0cmVuZGVyU3VnZ2VzdGlvbihjYXQ6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0ZWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBjYXQgfSk7XG5cdFx0Ly8gIGVsLmNyZWF0ZUVsKFwic21hbGxcIiwgeyB0ZXh0OiBib29rLmF1dGhvciB9KTtcblx0fVxuXG5cdC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxuXHRhc3luYyBvbkNob29zZVN1Z2dlc3Rpb24oY2F0OiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcblx0XHQvLyBSRVNFQVJDSCBIRVJFIGh0dHBzOi8vd3d3LnByb2dyYW1jcmVlay5jb20vdHlwZXNjcmlwdC8/YXBpPW9ic2lkaWFuLkZ1enp5U3VnZ2VzdE1vZGFsXG5cblx0XHR0aGlzLmNyZWF0ZUZvbGRlcih0aGlzLm91dHB1dEZvbGRlcik7XG5cdFx0aWYgKGNhdCAhPSBBcHBTZXR0aW5ncy5BTExfQ0FURUdPUklFUyl7XG5cdFx0XHR0aGlzLmNhdGVnb3JpZXMgPSBbY2F0XTtcblx0XHR9XG5cdFx0Ly8gRk9SRUVBQ0ggUXVlc3Rpb24gQ2F0ZWdvcnlcblx0XHRmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuY2F0ZWdvcmllcy5sZW5ndGg7IGorKykge1xuXHRcdFx0Y29uc29sZS5sb2coYGNhdCAke2p9ID0gJHt0aGlzLmNhdGVnb3JpZXNbal19YCk7XG5cdFx0XHQvLyBHZXQgYWxsIHRoZSBxdWVzdGlvbnNcblx0XHRcdGxldCB0aGVRdWVzdGlvbnMgPSBhd2FpdCB0aGlzLmdldENhdGVnb3J5UXVlc3Rpb25zKHRoaXMuY2F0ZWdvcmllc1tqXSk7XG5cblx0XHRcdGlmICh0aGVRdWVzdGlvbnMgIT0gbnVsbCkgeyAvLyBObyBjYXRlZ29yeSBxdWVzdGlvbnMsIHNvIGRvbid0IGNyZWF0ZSBhIGNhdGVnb3J5IGZvbGRlciBvciBvcHRpb25cblx0XHRcdFx0Ly8gbmVlZCB0aGUgZGlyZWN0b3J5IHNlcGFyYXRvciBcblx0XHRcdFx0Y29uc3QgdGhlRm9sZGVyID0gdGhpcy5vdXRwdXRGb2xkZXIuY29uY2F0KEFwcFNldHRpbmdzLk1BQ19GT0xERVJfU0VQQVJBVE9SKS5jb25jYXQodGhpcy5jYXRlZ29yaWVzW2pdKTtcblx0XHRcdFx0dGhpcy5jcmVhdGVGb2xkZXIodGhlRm9sZGVyKTsgLy8gQ3JlYXRlIHRoZSBjYXRlZ29yaWVzXG5cdFx0XHRcdC8vIEZPUkVBQ0ggRW1haWwgQ29udGFjdFxuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgY29udGFjdCAke2l9ID0gJHt0aGlzLmNvbnRhY3RzW2ldfWApXG5cdFx0XHRcdFx0Ly8gdHlwZSBDb250YWN0IHtcblx0XHRcdFx0XHQvLyBcdHRpdGxlOiBzdHJpbmc7XG5cdFx0XHRcdFx0Ly8gXHRmaXJzdE5hbWU6IHN0cmluZztcblx0XHRcdFx0XHQvLyBcdGxhc3ROYW1lOiBzdHJpbmc7XG5cdFx0XHRcdFx0Ly8gXHRlbWFpbEFkZHJlc3M6IHN0cmluZztcblx0XHRcdFx0XHQvLyB9O1xuXHRcdFx0XHRcdGZvciAobGV0IGsgPSAwOyBrIDwgdGhlUXVlc3Rpb25zLmxlbmd0aDsgaysrKXtcblx0XHRcdFx0XHRcdGxldCB0aGVRdWVzdGlvbiA9IHRoZVF1ZXN0aW9uc1trXTtcblx0XHRcdFx0XHRcdGNvbnN0IFt0aXRsZSwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWxBZGRyZXNzXSA9IHRoaXMuY29udGFjdHNbaV07XG5cdFx0XHRcdFx0XHRjb25zdCB0aGVTdWJqZWN0ID0gQXBwU2V0dGluZ3MuU1VCSkVDVF9HT0VTX0hFUkU7XG5cdFx0XHRcdFx0XHRjb25zdCB0aGVGaWxlTWV0YURhdGEgPSBgLS0tXFxuc2VudDogZmFsc2VcXG5jYXRlZ29yeTogJHt0aGlzLmNhdGVnb3JpZXNbal19XFxuLS0tXFxuXFxuYDtcblx0XHRcdFx0XHRcdGNvbnN0IHRoZVF1ZXN0aW9uRmlsZU5hbWU6IHN0cmluZ1tdID0gdGhlUXVlc3Rpb24uc3BsaXQoXCJcXG5cIiwgMik7XG5cdFx0XHRcdFx0XHRjb25zdCBpbmRleCA9IHRoZVF1ZXN0aW9uLmluZGV4T2YoXCJcXG5cIik7IC8vIEZpcnN0IGxpbmUgaXMgdGhlIGZpbGVuYW1lXG5cdFx0XHRcdFx0XHRpZiAoaW5kZXggIT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdHRoZVF1ZXN0aW9uID0gdGhlUXVlc3Rpb24uc3Vic3RyaW5nKGluZGV4LCB0aGVRdWVzdGlvbi5sZW5ndGggLSAxKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdGhlQm9keSA9IGAke0FwcFNldHRpbmdzLkZBT30gJHt0aXRsZX0gJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9JHt0aGVRdWVzdGlvbn1gO1xuXHRcdFx0XHRcdFx0XHQvLyBDcmVhdGUgUGVydGluZW50IFF1ZXN0aW9ucyBGaWxlIHVzaW5nIEZpcnN0IE5hbWUgYW5kIExhc3QgTmFtZVxuXHRcdFx0XHRcdFx0XHRjb25zdCB0aGVGaWxlTmFtZTogc3RyaW5nID0gdGhlRm9sZGVyLmNvbmNhdChcIi9cIikuY29uY2F0KGZpcnN0TmFtZSArIGxhc3ROYW1lICsgXCItXCIgKyB0aGVRdWVzdGlvbkZpbGVOYW1lWzBdICsgXCIubWRcIik7XG5cdFxuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlRXhpc3RzID0gYXdhaXQgdGhpcy5maWxlRXhpc3RzKHRoZUZpbGVOYW1lKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFmaWxlRXhpc3RzKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZSBkb2VzIG5vdCBleGlzdCwgc28gY3JlYXRlXG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYENSRUFUSU5HIEZJTEUgKioqICR7dGhlRmlsZU5hbWV9YCk7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IHRoZUZpbGUgPSBhd2FpdCB0aGlzLmNyZWF0ZUZpbGUodGhlRmlsZU5hbWUsIHRoZUZpbGVNZXRhRGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGhlQ29udGVudDogc3RyaW5nID0gKFwiYGBgZW1haWxcXG5cIi5jb25jYXQoYHRvOiAke2VtYWlsQWRkcmVzc31cXG5zdWJqZWN0OiAke3RoZVN1YmplY3R9XFxuXFxuYm9keTogXFxcIiR7dGhlQm9keX1cXFwiXFxuYCkuY29uY2F0KFwiYGBgXCIpLmNvbmNhdChcIlxcbiNUb1NlbmRcIikpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuYXBwZW5kKHRoZUZpbGUsIHRoZUNvbnRlbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdDb3VsZCBub3QgYXBwZW5kJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBDb3VsZCBub3QgYXBwZW5kIHRvIGZpbGU6ICR7dGhlRmlsZU5hbWV9IGR1ZSB0byAke2V9YCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnQ291bGQgbm90IGNyZWF0ZSBmaWxlJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgRXJyb3IgLSBjb3VsZCBub3QgY3JlYXRlIGZpbGUgZm9yICR7dGhlRmlsZU5hbWV9YCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vRmlsZSBleGlzdHMgLSBpZ25vcmVcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHR9XG5cdFx0XG5cblx0XHRcdFx0fSAvL0VuZCBGT1JFQUNIIGNvbnRhY3Rcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGBDb3VsZG4ndCByZWFkIGFueSBmaWxlIGF0ICR7dGhpcy5xdWVzdGlvbnNGb2xkZXJ9IGApO1xuXHRcdFx0fVxuXG5cdFx0fSAvL0VuZCBGT1JFQUNIIGNhdGVnb3J5XG5cdH1cblx0cHJvdGVjdGVkIGFzeW5jIGZpbGVFeGlzdHMoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVGaWxlKHRoZUZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZvbGRlck9yRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGVGaWxlUGF0aCk7XG5cblx0XHRcdGlmIChmb2xkZXJPckZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgQWxyZWFkeSBjcmVhdGVkIGZpbGUhISFgKTtcblx0XHRcdFx0cmV0dXJuIGZvbGRlck9yRmlsZTtcblx0XHRcdH0gZWxzZSBpZiAoZm9sZGVyT3JGaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgRXhwZWN0ZWQgdG8gY3JlYXRlIGZpbGUgYnV0IGZvbGRlciBzcGVjaWZpZWQ6ICR7dGhlRmlsZVBhdGh9YCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBObyBmaWxlIG9yIGZvbGRlciBzbyBjcmVhdGVcblx0XHRcdFx0Y29uc29sZS5sb2coYENyZWF0aW5nIEZpbGUgJHt0aGVGaWxlUGF0aH1gKTtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZEZpbGU6IFRGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHRoZUZpbGVQYXRoLCBjb250ZW50KTtcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZWRGaWxlO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRhc3luYyBjcmVhdGVGb2xkZXIodGhlRm9sZGVyOiBzdHJpbmcpIHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoZUZvbGRlcik7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkNyZWF0ZWRcIik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgZ2V0Q2F0ZWdvcnlRdWVzdGlvbnMoY2F0ZWdvcnk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIFtdIHwgbnVsbD4ge1xuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIGNvbmNhdCB0aGUgLyBhcyBhbGwgZm9sZGVycyBuZWVkIHRvIGJlIGRldm9pZCBvZiAvIHNsYXNoZXMgdG8gd29yayB3aXRoIGFic3RyYWN0RmlsZVBhdGggaW1wbCBJIGhhdmVcblx0XHRcdGNvbnN0IGZvbGRlck9yRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnF1ZXN0aW9uc0ZvbGRlci5jb25jYXQoQXBwU2V0dGluZ3MuTUFDX0ZPTERFUl9TRVBBUkFUT1IuY29uY2F0KGNhdGVnb3J5KSkpO1xuXG5cdFx0XHRpZiAoZm9sZGVyT3JGaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0XHRjb25zdCB0aGVRdWVzdGlvbnMgOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0XHRmb3IgKGxldCBjaGlsZCBvZiBmb2xkZXJPckZpbGUuY2hpbGRyZW4pIHtcblx0XHRcdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdFx0bGV0IHRoZVF1ZXN0aW9uTGluZXMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGNoaWxkKTtcblx0XHRcdFx0XHRcdGNvbnN0IGluZGV4ID0gY2hpbGQucGF0aC5sYXN0SW5kZXhPZihBcHBTZXR0aW5ncy5NQUNfRk9MREVSX1NFUEFSQVRPUik7XG5cdFx0XHRcdFx0XHRpZiAoaW5kZXggIT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdGxldCB0aGVRdWVzdGlvbiA9IGNoaWxkLnBhdGggKyBcIlxcblwiOyAvLyB3aWxsIGFkZCB0byBuZXcgZmlsZSBuYW1lXG5cdFx0XHRcdFx0XHRcdC8vIEFkZCAxIHRvIGluZGV4IHRvIGdvIHBhc3QgdGhlIC8gYW5kIHJlbW92ZSA0IHRvIGdldCByaWQgb2YgdGhlIC5tZFxuXHRcdFx0XHRcdFx0XHR0aGVRdWVzdGlvbiA9IHRoZVF1ZXN0aW9uLnN1YnN0cmluZyhpbmRleCArIDEsIHRoZVF1ZXN0aW9uLmxlbmd0aCAtIDQpOyAvLyBGaXJzdCBsaW5lIG9mIGludGVyaW0gZmlsZSBpcyBmaWxlbmFtZVxuXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHF1ZXN0aW9uTGluZXMgPSB0aGVRdWVzdGlvbkxpbmVzLnNwbGl0KFwiXFxuXCIpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5lU3RhcnQgPSBBcHBTZXR0aW5ncy5FTUFJTF9OTC5jb25jYXQoQXBwU2V0dGluZ3MuRU1BSUxfU09MKTtcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBxdWVzdGlvbkxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhlUXVlc3Rpb24gKz0gbGluZVN0YXJ0LmNvbmNhdChxdWVzdGlvbkxpbmVzW2ldKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGVRdWVzdGlvbnMudW5zaGlmdCh0aGVRdWVzdGlvbik7IFxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGVRdWVzdGlvbnM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgRXhwZWN0ZWQgZm9sZGVyIGluIGdldENhdGVnb3J5UXVlc3Rpb25zIHBhcmFtIGJ1dCBzZW50ICR7dGhpcy5xdWVzdGlvbnNGb2xkZXIuY29uY2F0KGNhdGVnb3J5KX1gKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXG5cblxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBQZXJ0aW5lbnRTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogUGVydGluZW50UXVlc3Rpb25zO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBlcnRpbmVudFF1ZXN0aW9ucykge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdHZW5lcmFsIFNldHRpbmdzJyB9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1F1ZXN0aW9ucyBGb2xkZXInKVxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRoZSBGb2xkZXIgTG9jYXRpb24nKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgUXVlc3Rpb25zIEZvbGRlcicpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWVzdGlvbnNGb2xkZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnUXVlc3Rpb25zIExvY2F0aW9uOiAnICsgdmFsdWUpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1ZXN0aW9uc0ZvbGRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdRdWVzdGlvbnMgT3V0cHV0IEZvbGRlcicpXG5cdFx0XHQuc2V0RGVzYygnRW50ZXIgdGhlIFBlcnRpbmVudCBRdWVzdGlvbnMgT3V0cHV0IEZvbGRlciBMb2NhdGlvbicpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBQZXJ0aW5lbnQgUXVlc3Rpb25zIE91dHB1dCBGb2xkZXInKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3V0cHV0Rm9sZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ091dHB1dCBGb2xkZXIgTG9jYXRpb246ICcgKyB2YWx1ZSk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3V0cHV0Rm9sZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0NvbnRhY3RzIEltcG9ydCBGaWxlJylcblx0XHRcdC5zZXREZXNjKCdFbnRlciB0aGUgQ29udGFjdHMgSW1wb3J0IEZpbGUgTG9jYXRpb24nKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgQ29udGFjdHMgRmlsZSBMb2NhdGlvbicpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250YWN0c0ZpbGUpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnQ29udGFjdHMgRmlsZSBMb2NhdGlvbjogJyArIHZhbHVlKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250YWN0c0ZpbGUgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHR9XG59XG5cbiIsICJleHBvcnQgY2xhc3MgQXBwU2V0dGluZ3N7XG4gICAgcHVibGljIHN0YXRpYyBFTUFJTF9OTCA9IGBcXG5cXG5gOy8vIEVtYWlsIG5ldyBsaW5lXG4gICAgcHVibGljIHN0YXRpYyAgRU1BSUxfU09MID0gYCAgYDsgLy9FbWFpbCBzdGFydCBvZiBsaW5lXG4gICAgcHVibGljIHN0YXRpYyBNQUNfRk9MREVSX1NFUEFSQVRPUiA9IGAvYDtcbiAgICBwdWJsaWMgc3RhdGljIEFMTF9DQVRFR09SSUVTID0gXCJBbGwgQ2F0ZWdvcmllc1wiO1xuICAgIHB1YmxpYyBzdGF0aWMgQ1JFQVRFX1BFUlRJTkVOVF9RVUVTVElPTlMgPSAnQ3JlYXRlIFBlcnRpbmVudCBRdWVzdGlvbnMnO1xuICAgIHB1YmxpYyBzdGF0aWMgU1VCSkVDVF9HT0VTX0hFUkUgPSBcIlNVQkpFQ1QgR09FUyBIRVJFXCI7XG4gICAgcHVibGljIHN0YXRpYyBGQU8gPSBcIkZBT1wiO1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBZ0o7OztBQ0F6SSxJQUFNLGNBQU4sTUFBaUI7QUFReEI7QUFSYSxZQUNLLFdBQVc7QUFBQTtBQUFBO0FBQUE7QUFEaEIsWUFFTSxZQUFZO0FBQUE7QUFGbEIsWUFHSyx1QkFBdUI7QUFINUIsWUFJSyxpQkFBaUI7QUFKdEIsWUFLSyw2QkFBNkI7QUFMbEMsWUFNSyxvQkFBb0I7QUFOekIsWUFPSyxNQUFNOzs7QURZeEIsSUFBTSxtQkFBK0M7QUFBQSxFQUNwRCxpQkFBaUI7QUFBQSxFQUNqQixjQUFjO0FBQUEsRUFDZCxjQUFjO0FBRWY7QUFJQSxJQUFxQixxQkFBckIsY0FBZ0Qs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
